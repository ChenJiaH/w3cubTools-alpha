_N_E=("object"!==typeof self?self:this.webpackJsonp_N_E="object"!==typeof self?self:this.webpackJsonp_N_E||[]).push([[63],{"+Css":function(t,e,n){"use strict";function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return i}))},"7LId":function(t,e,n){"use strict";function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}n.d(e,"a",(function(){return r}))},ClXt:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return B}));var i=n("nKUr"),r=n("q1tI"),s=n.n(r),o=n("H+61"),a=n("UlJF"),c=n("+Css"),u=n("7LId"),l=n("VIvw"),h=n("iHvq"),f=n("cpVT");function v(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(l.a)(this,n)}}var p=function(t){Object(u.a)(n,t);var e=v(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(i.jsxs)("div",{className:"heading",children:[Object(i.jsx)("h1",{className:"title",children:"2048"}),Object(i.jsxs)("div",{className:"scores-container",children:[Object(i.jsx)("div",{className:"score-container",children:this.props.score}),Object(i.jsx)("span",{children:"\xa0"}),Object(i.jsx)("div",{className:"best-container",children:this.props.best})]})]})}}]),n}(r.Component);function d(){return Object(i.jsxs)("div",{className:"above-game",children:[Object(i.jsxs)("p",{className:"game-intro",children:["Join the numbers and get to the ",Object(i.jsx)("strong",{children:"2048 tile!"})]}),Object(i.jsx)("a",{className:"restart-button",children:"New Game"})]})}var y=n("TSYQ"),b=n.n(y);function m(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(l.a)(this,n)}}var g=function(t){Object(u.a)(n,t);var e=m(n);function n(t){var i;return Object(o.a)(this,n),(i=e.call(this,t)).state={previousPosition:null,mergedFrom:null,isNew:!0},i}return Object(a.a)(n,[{key:"render",value:function(){var t=b()("tile","tile-"+this.props.value,["tile-position",this.props.x+1,this.props.y+1].join("-"),{"tile-new":this.state.isNew});return Object(i.jsxs)("div",{className:t,children:[" ",Object(i.jsxs)("div",{className:"tile-inner",children:[" ",this.props.value]})]})}},{key:"componentDidUpdate",value:function(t){t.x===this.props.x&&t.y===this.props.y||this.setState({previosuPosition:{x:this.props.x,y:this.props.y},isNew:!1})}}]),n}(s.a.Component),j=0,O=function(){function t(e,n){Object(o.a)(this,t),Object(f.a)(this,"previousPosition",void 0),Object(f.a)(this,"x",void 0),Object(f.a)(this,"y",void 0),Object(f.a)(this,"value",void 0),Object(f.a)(this,"mergedFrom",void 0),Object(f.a)(this,"prog",void 0),this.x=e.x,this.y=e.y,this.value=n||2,this.previousPosition=null,this.mergedFrom=null,this.prog=j++}return Object(a.a)(t,[{key:"savePosition",value:function(){this.previousPosition={x:this.x,y:this.y}}},{key:"updatePosition",value:function(t){this.x=t.x,this.y=t.y}},{key:"serialize",value:function(){return{position:{x:this.x,y:this.y},value:this.value}}}]),t}();function x(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(l.a)(this,n)}}var w=function(t){Object(u.a)(n,t);var e=x(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"getChildren",value:function(){var t=[];return this.props.tiles.forEach((function(e){t.push(Object(i.jsx)(g,{x:e.x,y:e.y,value:e.value},e.prog))})),t}},{key:"render",value:function(){return Object(i.jsx)("div",{className:"tile-container",children:this.getChildren()})}}]),n}(s.a.Component);var k=function(){return Object(i.jsx)("div",{className:"grid-cell"})};function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(l.a)(this,n)}}var P=function(t){Object(u.a)(n,t);var e=S(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"getChildren",value:function(){for(var t=[],e=0;e<this.props.size;e++)t.push(Object(i.jsx)(k,{},e));return t}},{key:"render",value:function(){return Object(i.jsx)("div",{className:"grid-row",children:this.getChildren()})}}]),n}(r.Component);function T(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(l.a)(this,n)}}var R=function(t){Object(u.a)(n,t);var e=T(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"getChildren",value:function(){for(var t=[],e=0;e<this.props.size;e++)t.push(Object(i.jsx)(P,{size:this.props.size},e));return t}},{key:"render",value:function(){return Object(i.jsx)("div",{className:"grid-container",children:this.getChildren()})}}]),n}(r.Component);function z(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(l.a)(this,n)}}var C,N=function(t){Object(u.a)(n,t);var e=z(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=b()("game-message",{"game-won":this.props.won,"game-over":this.props.over}),e=this.props.won?"You win!":"Game over!";return Object(i.jsxs)("div",{className:"game-container",children:[Object(i.jsxs)("div",{className:t,children:[Object(i.jsx)("p",{children:e}),Object(i.jsxs)("div",{className:"lower",children:[Object(i.jsx)("a",{className:"keep-playing-button",children:"Keep going"}),Object(i.jsx)("a",{className:"retry-button",children:"Try again"})]})]}),Object(i.jsx)(R,{size:this.props.size}),Object(i.jsx)(w,{size:this.props.size,tiles:this.props.tiles})]})}}]),n}(r.Component),E={_data:{},setItem:function(t,e){return this._data[t]=String(e)},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:void 0},removeItem:function(t){return delete this._data[t]},clear:function(){return this._data={}}},_=function(){function t(){Object(o.a)(this,t),Object(f.a)(this,"bestScoreKey",void 0),Object(f.a)(this,"gameStateKey",void 0),Object(f.a)(this,"storage",void 0),this.bestScoreKey="bestScore",this.gameStateKey="gameState";var e=this.localStorageSupported();this.storage=e?window.localStorage:E}return Object(a.a)(t,[{key:"localStorageSupported",value:function(){var t="test",e=window.localStorage;try{return e.setItem(t,"1"),e.removeItem(t),!0}catch(n){return!1}}},{key:"getBestScore",value:function(){return this.storage.getItem(this.bestScoreKey)||0}},{key:"setBestScore",value:function(t){this.storage.setItem(this.bestScoreKey,t)}},{key:"getGameState",value:function(){var t=this.storage.getItem(this.gameStateKey);return t?JSON.parse(t):null}},{key:"setGameState",value:function(t){this.storage.setItem(this.gameStateKey,JSON.stringify(t))}},{key:"clearGameState",value:function(){this.storage.removeItem(this.gameStateKey)}}]),t}(),D=function(){function t(){Object(o.a)(this,t),Object(f.a)(this,"events",void 0),Object(f.a)(this,"eventTouchstart",void 0),Object(f.a)(this,"eventTouchmove",void 0),Object(f.a)(this,"eventTouchend",void 0),this.events={},window.navigator.msPointerEnabled?(this.eventTouchstart="MSPointerDown",this.eventTouchmove="MSPointerMove",this.eventTouchend="MSPointerUp"):(this.eventTouchstart="touchstart",this.eventTouchmove="touchmove",this.eventTouchend="touchend"),this.listen()}return Object(a.a)(t,[{key:"on",value:function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)}},{key:"emit",value:function(t,e){var n=this.events[t];n&&n.forEach((function(t){t(e)}))}},{key:"listen",value:function(){var t,e,n=this,i={38:0,39:1,40:2,37:3,75:0,76:1,74:2,72:3,87:0,68:1,83:2,65:3};document.addEventListener("keydown",(function(t){var e=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey,r=i[t.which];e||void 0!==r&&(t.preventDefault(),n.emit("move",r)),e||82!==t.which||n.restart.call(n,t)})),this.bindButtonPress(".retry-button",this.restart),this.bindButtonPress(".restart-button",this.restart),this.bindButtonPress(".keep-playing-button",this.keepPlaying);var r=document.getElementsByClassName("game-container")[0];r.addEventListener(this.eventTouchstart,(function(n){!window.navigator.msPointerEnabled&&n.touches.length>1||n.targetTouches.length>1||(window.navigator.msPointerEnabled?(t=n.pageX,e=n.pageY):(t=n.touches[0].clientY,e=n.touches[0].clientY),n.preventDefault())})),r.addEventListener(this.eventTouchmove,(function(t){t.preventDefault()})),r.addEventListener(this.eventTouchend,(function(i){if(!(!window.navigator.msPointerEnabled&&i.touches.length>0||i.targetTouches.length>0)){var r,s;window.navigator.msPointerEnabled?(r=i.pageX,s=i.pageY):(r=i.changedTouches[0].clientY,s=i.changedTouches[0].clientY);var o=r-t,a=Math.abs(o),c=s-e,u=Math.abs(c);Math.max(a,u)>10&&n.emit("move",a>u?o>0?1:3:c>0?2:0)}}))}},{key:"restart",value:function(t){t.preventDefault(),this.emit("restart")}},{key:"keepPlaying",value:function(t){t.preventDefault(),this.emit("keepPlaying")}},{key:"bindButtonPress",value:function(t,e){var n=document.querySelector(t);n&&(n.addEventListener("click",e.bind(this)),n.addEventListener(this.eventTouchend,e.bind(this)))}}]),t}();function M(t,e){this.size=t,this.cells=e?this.fromState(e):this.empty()}function I(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(l.a)(this,n)}}M.prototype.empty=function(){for(var t=[],e=0;e<this.size;e++)for(var n=t[e]=[],i=0;i<this.size;i++)n.push(null);return t},M.prototype.fromState=function(t){for(var e=[],n=0;n<this.size;n++)for(var i=e[n]=[],r=0;r<this.size;r++){var s=t[n][r];i.push(s?new O(s.position,s.value):null)}return e},M.prototype.randomAvailableCell=function(){var t=this.availableCells();if(t.length)return t[Math.floor(Math.random()*t.length)]},M.prototype.availableCells=function(){var t=[];return this.eachCell((function(e,n,i){i||t.push({x:e,y:n})})),t},M.prototype.eachCell=function(t){for(var e=0;e<this.size;e++)for(var n=0;n<this.size;n++)t(e,n,this.cells[e][n])},M.prototype.cellsAvailable=function(){return!!this.availableCells().length},M.prototype.cellAvailable=function(t){return!this.cellOccupied(t)},M.prototype.cellOccupied=function(t){return!!this.cellContent(t)},M.prototype.cellContent=function(t){return this.withinBounds(t)?this.cells[t.x][t.y]:null},M.prototype.insertTile=function(t){this.cells[t.x][t.y]=t},M.prototype.removeTile=function(t){this.cells[t.x][t.y]=null},M.prototype.withinBounds=function(t){return t.x>=0&&t.x<this.size&&t.y>=0&&t.y<this.size},M.prototype.toString=function(){for(var t=[],e=0;e<this.size;e++){for(var n=0;n<this.size;n++)t.push(this.cells[n][e]?this.cells[n][e].value:"\xb7");t.push("\n")}return t.join("")},M.prototype.serialize=function(){for(var t=[],e=0;e<this.size;e++)for(var n=t[e]=[],i=0;i<this.size;i++)n.push(this.cells[e][i]?this.cells[e][i].serialize():null);return{size:this.size,cells:t}},C=new _;var K=function(t){Object(u.a)(n,t);var e=I(n);function n(t){var i;return Object(o.a)(this,n),i=e.call(this,t),Object(f.a)(Object(c.a)(i),"inputManager",void 0),Object(f.a)(Object(c.a)(i),"won",void 0),Object(f.a)(Object(c.a)(i),"over",void 0),Object(f.a)(Object(c.a)(i),"grid",void 0),Object(f.a)(Object(c.a)(i),"score",void 0),Object(f.a)(Object(c.a)(i),"keepPlaying",void 0),i.move=i.move.bind(Object(c.a)(i)),i.restart=i.restart.bind(Object(c.a)(i)),i.keepPlayingfn=i.keepPlayingfn.bind(Object(c.a)(i)),i}return Object(a.a)(n,[{key:"componentWillMount",value:function(){this.setup()}},{key:"componentDidMount",value:function(){this.inputManager=new D,this.inputManager.on("move",this.move),this.inputManager.on("restart",this.restart),this.inputManager.on("keepPlaying",this.keepPlayingfn)}},{key:"render",value:function(){return Object(i.jsx)("div",{className:"g-container",children:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(p,{score:this.state.score,best:this.state.best}),Object(i.jsx)(d,{}),Object(i.jsx)(N,{size:this.props.size,tiles:this.state.tiles,won:this.state.won,over:this.state.over})]})})}},{key:"getRandomTiles",value:function(){for(var t=[],e=0;e<this.props.startTiles;e++)t.push(this.getRandomTile());return t}},{key:"getRandomTile",value:function(){var t=Math.random()<.9?2:4,e=this.grid.randomAvailableCell(),n=new O(e,t);return this.grid.insertTile(n),{value:t,x:e.x,y:e.y,prog:n.prog}}},{key:"continueGame",value:function(){this.won=!1,this.over=!1}},{key:"restart",value:function(){C.clearGameState(),this.continueGame(),this.setup()}},{key:"keepPlayingfn",value:function(){this.keepPlaying=!0,this.continueGame()}},{key:"isGameTerminated",value:function(){return this.over||this.won&&!this.keepPlaying}},{key:"setup",value:function(){var t=C.getGameState();t?(this.grid=new M(t.grid.size,t.grid.cells),this.score=t.score,this.over=t.over,this.won=t.won,this.keepPlaying=t.keepPlaying):(this.grid=new M(this.props.size),this.score=0,this.over=!1,this.won=!1,this.keepPlaying=!1),this.setState({score:this.score,best:C.getBestScore(),tiles:this.getRandomTiles(),over:this.over,won:this.won})}},{key:"addStartTiles",value:function(){for(var t=0;t<this.startTiles;t++)this.addRandomTile()}},{key:"addRandomTile",value:function(){if(this.grid.cellsAvailable()){var t=Math.random()<.9?2:4,e=new O(this.grid.randomAvailableCell(),t);this.grid.insertTile(e)}}},{key:"actuate",value:function(){this.over?C.clearGameState():C.setGameState(this.serialize());var t=[];this.grid.cells.forEach((function(e){e.forEach((function(e){e&&t.push({x:e.x,y:e.y,value:e.value,prog:e.prog})}))})),C.getBestScore()<this.score?(C.setBestScore(this.score),this.setState({score:this.score,best:this.score,tiles:t,won:this.won,over:this.over})):this.setState({score:this.score,tiles:t,won:this.won,over:this.over})}},{key:"serialize",value:function(){return{grid:this.grid.serialize(),score:this.score,over:this.over,won:this.won,keepPlaying:this.keepPlaying}}},{key:"prepareTiles",value:function(){this.grid.eachCell((function(t,e,n){n&&(n.mergedFrom=null,n.savePosition())}))}},{key:"moveTile",value:function(t,e){this.grid.cells[t.x][t.y]=null,this.grid.cells[e.x][e.y]=t,t.updatePosition(e)}},{key:"move",value:function(t){var e=this;if(!this.isGameTerminated()){var n,i,r=this.getVector(t),s=this.buildTraversals(r),o=!1;this.prepareTiles(),s.x.forEach((function(t){s.y.forEach((function(s){if(n={x:t,y:s},i=e.grid.cellContent(n)){var a=e.findFarthestPosition(n,r),c=e.grid.cellContent(a.next);if(c&&c.value===i.value&&!c.mergedFrom){var u=new O(a.next,2*i.value);u.mergedFrom=[i,c],e.grid.insertTile(u),e.grid.removeTile(i),i.updatePosition(a.next),e.score+=u.value,2048===u.value&&(e.won=!0)}else e.moveTile(i,a.farthest);e.positionsEqual(n,i)||(o=!0)}}))})),o&&(this.addRandomTile(),this.movesAvailable()||(this.over=!0),this.actuate())}}},{key:"getVector",value:function(t){return{0:{x:0,y:-1},1:{x:1,y:0},2:{x:0,y:1},3:{x:-1,y:0}}[t]}},{key:"buildTraversals",value:function(t){for(var e={x:[],y:[]},n=0;n<this.props.size;n++)e.x.push(n),e.y.push(n);return 1===t.x&&(e.x=e.x.reverse()),1===t.y&&(e.y=e.y.reverse()),e}},{key:"findFarthestPosition",value:function(t,e){var n;do{t={x:(n=t).x+e.x,y:n.y+e.y}}while(this.grid.withinBounds(t)&&this.grid.cellAvailable(t));return{farthest:n,next:t}}},{key:"movesAvailable",value:function(){return this.grid.cellsAvailable()||this.tileMatchesAvailable()}},{key:"tileMatchesAvailable",value:function(){for(var t,e=0;e<this.props.size;e++)for(var n=0;n<this.props.size;n++)if(t=this.grid.cellContent({x:e,y:n}))for(var i=0;i<4;i++){var r=this.getVector(i),s={x:e+r.x,y:n+r.y},o=this.grid.cellContent(s);if(o&&o.value===t.value)return!0}return!1}},{key:"positionsEqual",value:function(t,e){return t.x===e.x&&t.y===e.y}}]),n}(r.Component),G=n("Edbx");function B(){return Object(i.jsx)(G.a,{flexDirection:"column",layoutHeight:"auto",children:Object(i.jsx)(K,{size:"4",startTiles:"2"})})}},"H+61":function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return i}))},UlJF:function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,"a",(function(){return r}))},VIvw:function(t,e,n){"use strict";function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return s}));var r=n("+Css");function s(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?Object(r.a)(t):e}},cpVT:function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return i}))},iHvq:function(t,e,n){"use strict";function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return i}))},mQXF:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/g2048",function(){return n("ClXt")}])}},[["mQXF",0,1,2,3,4,5,6,7,8,19]]]);