_N_E=("object"!==typeof self?self:this.webpackJsonp_N_E="object"!==typeof self?self:this.webpackJsonp_N_E||[]).push([[120],{"0jRx":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/long-weibo",function(){return n("5Y4E")}])},"5Y4E":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var o,i,r=n("nKUr"),a=n("H+61"),c=n("UlJF"),u=n("cpVT"),l=n("q1tI"),s=n("Ar1z"),d=n("Cino"),f=n("kFyS");o=_ckeditor_ckeditor5BuildClassic,i=_ckeditor_ckeditor5React;var p=function(){function e(t){Object(a.a)(this,e),Object(u.a)(this,"loader",void 0),this.loader=t}return Object(c.a)(e,[{key:"upload",value:function(){return this.loader.file}}]),e}();function m(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new p(e)}}var h=function(e,t){return function(e,t){var n=new XMLHttpRequest;n.onload=function(){t(n.response)},n.open("GET",e),n.send()}(e="https://helloacm.com/api/image-to-base64/?url="+e,t)};function b(){var e=Object(l.useState)(!1),t=e[0],n=e[1],a=Object(l.useState)(!1),c=a[0],u=a[1],p=Object(l.useState)(!1),b=p[0];p[1];return Object(r.jsxs)("div",{className:"box",style:{width:"700px",margin:"auto"},children:[Object(r.jsx)("h1",{children:"\u957f\u5fae\u535a\u751f\u6210\u5668"}),Object(r.jsx)(s.a,{marginBottom:15,display:"flex",children:Object(r.jsx)(d.a,{height:50,isLoading:c,onClick:function e(){var t=document.querySelector(".ck.ck-content").getElementsByTagName("img");if([].slice.call(t).reduce((function(e,t){return/^(https?\:)?\/\//.test(t.src)?e+Number(!0):e}),0)>0)return u(!0),void setTimeout((function(){e()}),300);u(!1);var o=document.querySelector(".ck.ck-content"),i=o.className;if(o.className+=" html2canvasreset",!b){var r=document.createElement("div");r.style.font="10px Comic Sans MS",r.style.color="#efefef",r.style.textAlign="right",r.style.marginTop="20px",r.innerHTML="Imaged by w3cubTools",o.appendChild(r)}html2canvas(o,{allowTaint:!0,allowedContent:!0,width:o.scrollWidth,height:o.scrollHeight+100}).then((function(e){o.className=i,n(!0),e.id="imgcanvas";var t=document.getElementById("cnavas");t&&t.append(e)}))},children:"Generate Image"})}),Object(r.jsx)(f.a,{isShown:t,width:"max-content",topOffset:"30px",title:"Image results",onCloseComplete:function(){return n(!1)},hasFooter:!1,children:Object(r.jsxs)("div",{children:[Object(r.jsx)(d.a,{className:"save-btn",onClick:function(e){document.getElementById("imgcanvas").toBlob((function(e){saveAs(e,"longweibo.png")}))},children:"Save as Image"}),Object(r.jsx)("div",{id:"cnavas"})]})}),Object(r.jsx)("div",{style:{minHeight:"600px"},children:Object(r.jsx)(i,{editor:o,id:"editor_box",data:"<div id='capture'>Welcome to Long Weibo Generator!</div>",config:{toolbar:["heading","|","bold","italic","link","bulletedList","numberedList","imageUpload","blockQuote","insertTable","undo","redo"],extraPlugins:[m],config:{ui:{width:"500px",height:"300px"}}},onInit:function(e){console.log("Editor is ready to use!",e)},onChange:function(e,t){var n=t.getData();setTimeout((function(){!function(){var e=document.querySelector(".ck.ck-content").getElementsByTagName("img");[].slice.call(e).forEach((function(e,t){e.removeAttribute("srcset"),/^(https?\:)?\/\//.test(e.src)&&h(e.src,(function(t){e.src=t}))}))}()}),300),console.log({event:e,editor:t,data:n})},onBlur:function(e){console.log("Blur.",e)},onFocus:function(e){console.log("Focus.",e)}})}),Object(r.jsx)("style",{children:"\n                .html2canvasreset{\n                    overflow: visible !important;\n                    width: auto !important;\n                    height: auto !important;\n                    max-height: auto !important;\n                    border: 1px solid transparent!important;\n                }\n                .ck-editor__main > .ck-editor__editable {\n                    min-height: 500px;\n                }\n                "})]})}},Bp9Y:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var o=!("undefined"===typeof window||!window.document||!window.document.createElement);t.default=o,e.exports=t.default},"H+61":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return o}))},RXGs:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var o,i=n("1OyB"),r=n("vuIU"),a=n("md7G"),c=n("foSv"),u=n("Ji7U"),l=n("q1tI"),s=n("Bp9Y"),d=n.n(s),f=n("i8i4"),p=n.n(f),m=n("17x9"),h=n.n(m),b=function(e){function t(){var e;return Object(i.a)(this,t),e=Object(a.a)(this,Object(c.a)(t).call(this)),d.a?(o||((o=document.createElement("div")).setAttribute("evergreen-portal-container",""),document.body.appendChild(o)),e.el=document.createElement("div"),o.appendChild(e.el),e):Object(a.a)(e)}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentWillUnmount",value:function(){o.removeChild(this.el)}},{key:"render",value:function(){return d.a?p.a.createPortal(this.props.children,this.el):null}}]),t}(l.Component);b.displayName="Portal",b.propTypes={children:h.a.node.isRequired}},TsTy:function(e,t,n){"use strict";function o(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return e.apply(void 0,n)}}n.d(t,"a",(function(){return o}))},UlJF:function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.d(t,"a",(function(){return i}))},cpVT:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o}))},icCI:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var o=n("1OyB"),i=n("vuIU"),r=n("md7G"),a=n("foSv"),c=n("Ji7U"),u=n("rePB"),l=n("q1tI"),s=n.n(l),d=n("17x9"),f=n.n(d),p=n("uS4J"),m=s.a.createContext(p.a.STACKING_CONTEXT),h=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.value;return s.a.createElement(m.Consumer,null,(function(e){var o=Math.max(n,e),i=o+1;return s.a.createElement(m.Provider,{value:i},t(o))}))}}]),t}(l.PureComponent);h.displayName="Stack",Object(u.a)(h,"propTypes",{children:f.a.func.isRequired,value:f.a.number}),Object(u.a)(h,"defaultProps",{value:p.a.STACKING_CONTEXT})}},[["0jRx",0,1,2,4,6,8,10,21,22]]]);